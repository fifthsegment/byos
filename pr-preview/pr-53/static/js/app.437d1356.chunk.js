(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{263:function(e,t,n){e.exports=n(354)},341:function(e,t){},354:function(e,t,n){"use strict";n.r(t);var r=n(381),c=(n(355),n(3)),o=n(1),i=n.n(o),a=n(7),s=n.n(a),u=n(22),l=n.n(u),f=Object(o.createContext)(Object.create(null)),d={s3credentials:{apiKey:void 0,apiSecret:void 0,region:void 0,endpoint:void 0,bucket:void 0},s3client:void 0,otherStuff:""},j=Object(o.createContext)(Object.create(null)),b=n(382),O=n(376),p=n(75),g=n(5),h=function(e){return Object(g.jsxs)(O.default.Header,{mode:"center-aligned",elevated:!0,children:[Object(g.jsx)(p.PortalHost,{name:"Back"}),Object(g.jsx)(O.default.Content,{title:e.title}),Object(g.jsx)(p.PortalHost,{name:"Reloader"})]})},y=n(379),v=n(128),m=n(39),x=n.n(m),P=n(27),w=n.n(P),S=n(374),C=n(368),D=(n(309),n(321),function(e){var t=e.credentials,n=e.region,r=e.endpoint,c=new S.S3Client({region:n,credentials:t,endpoint:r});return c.middlewareStack.add((function(e,t){return function(){var t=w()((function*(t){return yield e(t)}));return function(e){return t.apply(this,arguments)}}()}),{step:"finalizeRequest",name:"removeHeaders"}),c}),k=function(){var e=w()((function*(e,t){var n,r;console.log("[s3:getAssets] Making a List Objects command");var c=new C.ListObjectsCommand(t);console.log("[s3:getAssets] Command ",c),console.log("[s3:getAssets] Our s3 Client",e),console.log("[s3:getAssets] Sending command using client.send");var o=yield e.send(c),i=(null==(n=o.CommonPrefixes)?void 0:n.map((function(e){return{prefix:e.Prefix,etag:void 0,name:e.Prefix,lastModified:void 0,size:0}})))||[],a=(null==(r=o.Contents)?void 0:r.map((function(e){return{etag:e.ETag,name:null==e?void 0:e.Key,lastModified:null==e?void 0:e.LastModified,size:null==e?void 0:e.Size}})))||[];return[].concat(x()(i),x()(a))}));return function(t,n){return e.apply(this,arguments)}}(),E=n(48),I=n(377),A=n(38),R=n(375);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c.default.create({input:{height:40,margin:12,borderWidth:1,padding:10}});var z=function(){return Object(g.jsx)(R.default,F({},arguments.length<=0?void 0:arguments[0]))},M=function(e){var t=e.control,n=e.name,r=e.label;if(void 0===t)return null;var o=c.default.create({textInput:{height:40,marginTop:20}});return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(v.Controller,{control:t,name:n,render:function(e){var t=e.field,c=t.value,i=t.onChange,a=t.onBlur;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(z,{name:n,label:r,value:c,onChangeText:function(e){console.log("[InputChange] name = ",n," value = ",e),i(e)},onBlur:a,style:o.textInput})})}})})},N=n(132);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){return Object(g.jsx)(N.default,L({},arguments.length<=0?void 0:arguments[0]))},T=n(61),V=n(227),G=n(15),J=n(6),Q=n(369);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(){return Object(g.jsx)(Q.default,Y({},arguments.length<=0?void 0:arguments[0]))};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(){var e=Object(o.useContext)(j),t=l()(e,2),n=t[0],r=t[1],a=n.s3credentials,s=Object(v.useForm)({defaultValues:a}),u=s.control,f=s.handleSubmit,d=(s.formState,s.getValues),b=s.reset;Object(o.useEffect)((function(){b(a)}),[a]);var O=Object(o.useState)(!1),p=l()(O,2),h=(p[0],p[1]),y=i.a.useState(""),m=l()(y,2),x=(m[0],m[1],i.a.useState(!1)),P=l()(x,2),w=P[0],S=P[1],C=function(){return S(!w)},R=c.default.create({container:{flex:1},inner:{padding:24,flex:1,justifyContent:"space-around"},header:{fontSize:36,marginBottom:48},textInput:{height:40,borderColor:"#000000",borderBottomWidth:1,marginBottom:36},snackBarContainer:{flex:1,justifyContent:"space-between"}});return Object(g.jsxs)(T.default,{children:[Object(g.jsx)(V.default,{behavior:"ios"===G.default.OS?"padding":"height",style:R.container,children:Object(g.jsx)(E.default,{style:R.inner,children:Object(g.jsxs)(I.default,{children:[Object(g.jsxs)(I.default.Content,{children:[Object(g.jsx)(A.default,{variant:"headlineSmall",children:"API Configuration"}),Object(g.jsx)(M,{control:u,name:"apiKey",label:"API KEY"}),Object(g.jsx)(M,{control:u,name:"apiSecret",label:"Api Secret"}),Object(g.jsx)(M,{control:u,name:"endpoint",label:"Endpoint"}),Object(g.jsx)(M,{control:u,name:"bucket",label:"Bucket"}),Object(g.jsx)(M,{control:u,name:"region",label:"Region"})]}),Object(g.jsx)(I.default.Actions,{children:Object(g.jsx)(H,{onPress:f((function(){C();var e=d();console.log("[SaveCredentialsForm] Saving data = ",e),r($($({},n),{},{s3credentials:e,s3client:void 0})),h(!0),setTimeout((function(){h(!1)}),1e3);var t=D({credentials:{accessKeyId:e.apiKey,secretAccessKey:e.apiSecret},region:e.region,endpoint:e.endpoint});k(t,{Bucket:"testinghumza"})})),children:"Submit"})})]})})}),Object(g.jsx)(J.default,{style:R.snackBarContainer,children:Object(g.jsx)(_,{visible:w,onDismiss:function(){return S(!1)},action:{label:"Dismiss",onPress:function(){}},children:"Credentials are saved!"})})]})},X=function(){return Object(g.jsx)(U,{})},Z=n(370),ee=function(e,t){return e.map((function(e){var n,r=e.name.replace(t.Prefix,"");return{assetId:e.etag,fileName:r,fileSize:e.size,updatedAt:e.lastModified,isFolder:(null==(n=e.prefix)?void 0:n.length)>0,prefix:e.prefix}}))},te=n(77),ne=function(){var e=i.a.useState(null),t=l()(e,1)[0];Boolean(t);return Object(g.jsx)(g.Fragment,{})},re=n(237),ce=n(155),oe=n.n(ce),ie=n(238),ae=n.n(ie),se=n(371),ue=n(372);oe.a.extend(ae.a);var le=function(e){switch(e.isFolder?"folder":/(?:\.([^.]+))?$/.exec(e.fileName)[1]||""){case"folder":return Object(g.jsx)(se.default,{name:"folder1",size:24});case"txt":return Object(g.jsx)(ue.default,{name:"file-text",size:24});default:return Object(g.jsx)(ue.default,{name:"file",size:24})}},fe=function(){var e=Object(te.createColumnHelper)();return[e.accessor("fileName",{id:"fileName",header:"Name",cell:function(e){var t=e.row.original,n=t.isFolder?e.getValue().slice(0,-1):e.getValue();return Object(g.jsxs)(g.Fragment,{children:[le(t)," ",n]})}}),e.accessor("fileSize",{id:"fileSize",header:"Size",cell:function(e){return!e.row.original.isFolder&&Object(re.default)(e.getValue())}}),e.accessor("updatedAt",{id:"updatedAt",header:"Last Modified",cell:function(e){return!e.row.original.isFolder&&oe()(e.getValue()).fromNow()}}),e.display({id:"actions",cell:function(){return Object(g.jsx)(ne,{})}})].filter((function(e){return"web"===G.default.OS||"fileName"===e.id}))},de=n(378),je=function(e){var t=e.assets,n=e.onPress,r=i.a.useState((function(){return t||[]})),c=l()(r,2),a=c[0],s=c[1];Object(o.useEffect)((function(){s(t||[])}),[t]);var u=Object(te.useReactTable)({data:a,columns:fe(),getCoreRowModel:Object(te.getCoreRowModel)(),getPaginationRowModel:Object(te.getPaginationRowModel)()});return Object(o.useEffect)((function(){u.setPageSize(20)}),[]),Object(g.jsxs)(de.default,{children:[Object(g.jsx)(de.default.Header,{children:u.getHeaderGroups().map((function(e){return Object(g.jsx)(J.default,{children:e.headers.map((function(e){return Object(g.jsx)(de.default.Title,{children:e.isPlaceholder?null:Object(te.flexRender)(e.column.columnDef.header,e.getContext())},"header"+e.id)}))},e.id)}))}),u.getRowModel().rows.map((function(e){return Object(g.jsx)(de.default.Row,{onPress:function(){n(e.original)},children:e.getVisibleCells().map((function(e){return Object(g.jsx)(de.default.Cell,{children:Object(g.jsx)(A.default,{children:Object(te.flexRender)(e.column.columnDef.cell,e.getContext())})},e.id)}))},"dtbrow-"+e.id)})),Object(g.jsx)(de.default.Pagination,{page:u.getState().pagination.pageIndex+1,numberOfPages:u.getPageCount(),onPageChange:function(e){return u.setPageIndex(e-1)},label:u.getState().pagination.pageIndex+1+" of "+u.getPageCount()})]})},be=n(226);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=c.default.create({path:{margin:10}}),he=function(){var e,t=Object(o.useState)(""),n=l()(t,2),r=(n[0],n[1],Object(o.useState)("")),c=l()(r,2),i=c[0],a=c[1],s=Object(o.useContext)(j),u=l()(s,1)[0],f=function(e){var t=e.s3credentials,n=t.apiKey,r=t.apiSecret,c=t.region,i=t.endpoint,a=Object(o.useMemo)((function(){return n&&r&&i?(console.log("[useS3Client] Building S3 Client region = ",c),console.log("[useS3Client] Building S3 Client apiKey = ",n),[D({region:c,credentials:{accessKeyId:n,secretAccessKey:r},endpoint:i}),!0]):[void 0,!1]}),[n,r,c,i]),s=l()(a,2);return[s[0],s[1]]}(u),d=l()(f,2),b=d[0],O=d[1],h=Object(o.useState)({Bucket:u.s3credentials.bucket,Prefix:"",Delimiter:"/"}),y=l()(h,2),v=y[0],m=y[1];Object(o.useEffect)((function(){m(pe(pe({},v),{},{Bucket:u.s3credentials.bucket}))}),[u,b]);var x=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=Object(Z.useQuery)(["getAssets",r,n.Bucket||"",n.Delimiter||"",n.Prefix||""],w()((function*(){try{console.log("[useGetAssets] Getting data ");var t=yield k(e,n);return ee(t,n)}catch(r){console.log("[useGetAssets] Error : ",r)}return[]})),{enabled:t,refetchOnWindowFocus:!1});return c}(b,O,v,i),P=x.data,S=x.isLoading,C=x.isError,E=function(e){m(pe(pe({},v),{},{Prefix:e}))};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(p.Portal,{hostName:"Reloader",children:Object(g.jsx)(H,{onPress:function(){a(""+Math.random())},mode:"outlined",children:"Reload"})}),Object(g.jsx)(p.Portal,{hostName:"Back",children:(null==(e=v.Prefix)?void 0:e.length)>0&&Object(g.jsx)(H,{onPress:function(){!function(){var e=v.Prefix;if(""!==e){var t=e.substring(0,e.substring(0,e.length-1).lastIndexOf("/")+1);E(t)}}()},mode:"outlined",children:"Go back"})}),Object(g.jsx)(A.default,{variant:"bodyLarge",style:ge.path,children:"Bucket Root /"+v.Prefix}),S&&Object(g.jsx)(be.default,{animating:!0}),C&&Object(g.jsx)(A.default,{variant:"headlineSmall",children:"Error "}),Object(g.jsx)(T.default,{children:P&&!1===S&&Object(g.jsx)(je,{assets:P,onPress:function(e){e.isFolder&&E(e.prefix)}})})]})};function ye(){return Object(g.jsx)(he,{})}var ve=function(){var e=o.useState(0),t=l()(e,2),n=t[0],r=t[1],c=o.useState([{key:"assets",title:"Assets",focusedIcon:"folder"},{key:"api_configuration",title:"API Configuration",focusedIcon:"cogs"}]),i=l()(c,1)[0],a=y.default.SceneMap({assets:ye,api_configuration:X});return Object(g.jsx)(y.default,{navigationState:{index:n,routes:i},onIndexChange:r,renderScene:a})},me=n(160),xe=function(){var e=w()((function*(e){try{yield me.default.setItem("byos/application",JSON.stringify(e))}catch(t){}}));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=w()((function*(){try{var e=yield me.default.getItem("byos/application");if(null!==e)return e}catch(t){}return""}));return function(){return e.apply(this,arguments)}}(),we=function(e){try{return JSON.parse(e)}catch(t){return{}}},Se=function(){var e=w()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"{}",t=yield Pe();return we(t||e)}));return function(){return e.apply(this,arguments)}}();function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var De=function(){var e=i.a.useContext(f),t=l()(e,1)[0],n=function(e){var t=Object(o.useState)(e),n=l()(t,2),r=n[0],c=n[1],i=Object(o.useState)(!1),a=l()(i,2),s=a[0],u=a[1];return Object(o.useMemo)((function(){Se(JSON.stringify(e)).then((function(e){c(e),u(!0)}))}),[e]),{data:r,isLoaded:s}}(d),r=n.data,c=n.isLoaded,a=Object(o.useState)(r),u=l()(a,2),O=u[0],y=u[1];return Object(o.useEffect)((function(){y(r)}),[r]),Object(o.useEffect)((function(){var e;c&&(console.log("[App] Application state was updated = ",O),e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},O),xe(e))}),[O,c]),Object(g.jsx)(b.default,{children:Object(g.jsx)(p.PortalProvider,{children:Object(g.jsxs)(j.Provider,{value:a,children:[t.isReady&&t.routes.map((function(e){return null})),Object(g.jsx)(h,{title:"BYOS"}),Object(g.jsx)(ve,{})]})})})};function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=function(){return Object(g.jsx)(J.default,Ee({},arguments.length<=0?void 0:arguments[0]))},Ae=function(){return Object(g.jsx)(N.default,Ee({},arguments.length<=0?void 0:arguments[0]))};function Re(e){var t=e.children,n=(e.isOpen,e.handleClose);return Object(g.jsxs)(Ie,{style:{marginTop:100},children:[Object(g.jsx)(Ae,{onPress:function(){return n()},children:"Close"}),t]})}var Be={isReady:!1,routes:[{path:"/credentials",component:Object(g.jsx)((function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(Re,{isOpen:!1,handleClose:function(){},children:Object(g.jsx)(U,{})})})}),{}),showInNavigation:!0},{path:"/",component:Object(g.jsx)((function(){return Object(g.jsx)(g.Fragment,{})}),{}),showInNavigation:!0}]};function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=function(e){var t=e.children,n=i.a.useContext(f),r=l()(n,2),c=r[0],a=r[1];return Object(o.useEffect)((function(){!1===c.isReady&&a(ze(ze({},c),{},{isReady:!0}))}),[c.isReady,c.routes]),Object(g.jsx)(g.Fragment,{children:t})},Ne=n(373),Ke=n(231),Le=new Ne.QueryClient;function He(e){var t=e.children;return Object(g.jsx)(Ke.QueryClientProvider,{client:Le,children:t})}var Te=function(e){var t=e.children,n=Object(o.useState)(Be);return Object(g.jsx)(He,{children:Object(g.jsx)(f.Provider,{value:n,children:Object(g.jsx)(Me,{children:t})})})},Ve=function(){return Object(g.jsx)(Te,{children:Object(g.jsx)(De,{})})};c.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}});function Ge(){return Object(g.jsx)(Ve,{})}Object(r.default)(Ge),Object(r.default)(Ge)}},[[263,1,2]]]);
//# sourceMappingURL=app.437d1356.chunk.js.map