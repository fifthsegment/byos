(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{252:function(e,t,n){e.exports=n(342)},329:function(e,t){},342:function(e,t,n){"use strict";n.r(t);var r=n(368),c=(n(343),n(3)),o=n(2),i=n.n(o),a=n(5),s=n.n(a),u=n(23),l=n.n(u),f=Object(o.createContext)(Object.create(null)),j={s3credentials:{apiKey:void 0,apiSecret:void 0,region:void 0,endpoint:void 0,bucket:void 0},s3client:void 0,otherStuff:""},d=Object(o.createContext)(Object.create(null)),O=n(369),b=n(362),p=n(8),g=function(e){return Object(p.jsx)(b.default.Header,{mode:"center-aligned",elevated:!0,children:Object(p.jsx)(b.default.Content,{title:e.title})})},y=n(365),h=n(125),v=n(27),m=n.n(v),x=n(360),P=n(356),w=(n(297),n(309),function(e){var t=e.credentials,n=e.region,r=e.endpoint,c=new x.S3Client({region:n,credentials:t,endpoint:r});return c.middlewareStack.add((function(e,t){return function(){var t=m()((function*(t){return yield e(t)}));return function(e){return t.apply(this,arguments)}}()}),{step:"finalizeRequest",name:"removeHeaders"}),c}),S=function(){var e=m()((function*(e,t){var n;console.log("[s3:getAssets] Making a List Objects command");var r=new P.ListObjectsCommand(t);return console.log("[s3:getAssets] Command ",r),console.log("[s3:getAssets] Our s3 Client",e),console.log("[s3:getAssets] Sending command using client.send"),(null==(n=(yield e.send(r)).Contents)?void 0:n.map((function(e){return{etag:e.ETag,name:null==e?void 0:e.Key,lastModified:null==e?void 0:e.LastModified,size:null==e?void 0:e.Size}})))||[]}));return function(t,n){return e.apply(this,arguments)}}(),C=n(48),D=n(363),E=n(38),k=n(361);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}c.default.create({input:{height:40,margin:12,borderWidth:1,padding:10}});var I=function(){return Object(p.jsx)(k.default,R({},arguments.length<=0?void 0:arguments[0]))},M=function(e){var t=e.control,n=e.name,r=e.label;return void 0===t?null:Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(h.Controller,{control:t,name:n,render:function(e){var t=e.field,c=t.value,o=t.onChange,i=t.onBlur;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(I,{name:n,label:r,value:c,onChangeText:function(e){console.log("[InputChange] name = ",n," value = ",e),o(e)},onBlur:i})})}})})},F=n(129);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){return Object(p.jsx)(F.default,B({},arguments.length<=0?void 0:arguments[0]))},z=n(61),L=n(357);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=function(){return Object(p.jsx)(L.default,V({},arguments.length<=0?void 0:arguments[0]))};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=function(){var e=Object(o.useContext)(d),t=l()(e,2),n=t[0],r=t[1],c=n.s3credentials,a=Object(h.useForm)({defaultValues:c}),s=a.control,u=a.handleSubmit,f=(a.formState,a.getValues),j=a.reset;Object(o.useEffect)((function(){j(c)}),[c]);var O=Object(o.useState)(!1),b=l()(O,2),g=(b[0],b[1]),y=i.a.useState(""),v=l()(y,2),m=(v[0],v[1],i.a.useState(!1)),x=l()(m,2),P=x[0],k=x[1],A=function(){return k(!P)};return Object(p.jsx)(z.default,{children:Object(p.jsxs)(C.default,{children:[Object(p.jsxs)(D.default,{children:[Object(p.jsxs)(D.default.Content,{children:[Object(p.jsx)(E.default,{variant:"headlineSmall",children:"API Configuration"}),Object(p.jsx)(M,{control:s,name:"apiKey",label:"API KEY"}),Object(p.jsx)(M,{control:s,name:"apiSecret",label:"Api Secret"}),Object(p.jsx)(M,{control:s,name:"endpoint",label:"Endpoint"}),Object(p.jsx)(M,{control:s,name:"bucket",label:"Bucket"}),Object(p.jsx)(M,{control:s,name:"region",label:"Region"})]}),Object(p.jsx)(D.default.Actions,{children:Object(p.jsx)(N,{onPress:u((function(){A();var e=f();console.log("[SaveCredentialsForm] Saving data = ",e),r(G(G({},n),{},{s3credentials:e,s3client:void 0})),g(!0),setTimeout((function(){g(!1)}),1e3);var t=w({credentials:{accessKeyId:e.apiKey,secretAccessKey:e.apiSecret},region:e.region,endpoint:e.endpoint});S(t,{Bucket:"testinghumza"})})),children:"Submit"})})]}),Object(p.jsx)(H,{visible:P,onDismiss:function(){return k(!1)},action:{label:"Dismiss",onPress:function(){}},children:"Credentials are saved!"})]})})},Y=function(){return Object(p.jsx)(Q,{})},_=n(358),q=function(e){return e.map((function(e){return{assetId:e.etag,fileName:e.name,fileSize:e.size,updatedAt:e.lastModified}}))},W=n(82),U=function(){var e=i.a.useState(null),t=l()(e,1)[0];Boolean(t);return Object(p.jsx)(p.Fragment,{})},X=n(230),Z=n(151),$=n.n(Z),ee=n(231),te=n.n(ee);$.a.extend(te.a);var ne=function(e){switch(e){case"folder":case"textFile":default:return null}},re=function(){var e=Object(W.createColumnHelper)();return[e.accessor("fileName",{header:"Name",cell:function(e){return Object(p.jsxs)(p.Fragment,{children:[ne(e.row.original.fileType)," ",e.getValue()]})}}),e.accessor("fileSize",{header:"Size",cell:function(e){return Object(X.default)(e.getValue())}}),e.accessor("updatedAt",{header:"Last Modified",cell:function(e){return $()(e.getValue()).fromNow()}}),e.display({id:"actions",cell:function(){return Object(p.jsx)(U,{})}})]},ce=n(364),oe=function(e){var t=e.assets,n=i.a.useState((function(){return t||[]})),r=l()(n,2),c=r[0],a=r[1];Object(o.useEffect)((function(){a(t||[])}),[t]);var s=Object(W.useReactTable)({data:c,columns:re(),getCoreRowModel:Object(W.getCoreRowModel)()});return Object(p.jsxs)(ce.default,{children:[Object(p.jsx)(ce.default.Header,{children:s.getHeaderGroups().map((function(e){return Object(p.jsx)(ce.default.Row,{children:e.headers.map((function(e){return Object(p.jsx)(ce.default.Title,{children:e.isPlaceholder?null:Object(W.flexRender)(e.column.columnDef.header,e.getContext())},e.id)}))},e.id)}))}),Object(p.jsx)(z.default,{children:s.getRowModel().rows.map((function(e){return Object(p.jsx)(ce.default.Row,{children:e.getVisibleCells().map((function(e){return Object(p.jsx)(ce.default.Cell,{children:Object(p.jsx)(E.default,{children:Object(W.flexRender)(e.column.columnDef.cell,e.getContext())})},e.id)}))},e.id)}))})]})},ie=function(){var e=Object(o.useState)(""),t=l()(e,2),n=t[0],r=(t[1],Object(o.useState)("")),c=l()(r,2),i=c[0],a=c[1],s=Object(o.useContext)(d),u=l()(s,1)[0],f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Object(_.useQuery)(["getAssets",n,t.Bucket||"",t.Delimiter||"",t.Prefix||""],m()((function*(){try{console.log("[useGetAssets] Getting data ");var n=yield S(e,t);return q(n)}catch(r){console.log("[useGetAssets] Error : ",r)}return[]})));return r}(function(e){var t=e.s3credentials,n=t.apiKey,r=t.apiSecret,c=t.region,i=t.endpoint;return Object(o.useMemo)((function(){if(n&&r&&i)return console.log("[useS3Client] Building S3 Client region = ",c),console.log("[useS3Client] Building S3 Client apiKey = ",n),w({region:c,credentials:{accessKeyId:n,secretAccessKey:r},endpoint:i})}),[n,r,c,i])}(u),{Bucket:u.s3credentials.bucket,Prefix:""+n,Delimiter:"/"},i),j=f.data,O=f.isLoading,b=f.isError;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(N,{onPress:function(){a(""+Math.random())},children:"Reload"}),O&&Object(p.jsx)(E.default,{variant:"headlineSmall",children:"Loading"}),b&&Object(p.jsx)(E.default,{variant:"headlineSmall",children:"Error "}),j&&!1===O&&Object(p.jsx)(oe,{assets:j})]})};function ae(){return Object(p.jsx)(ie,{})}var se=function(){var e=o.useState(0),t=l()(e,2),n=t[0],r=t[1],c=o.useState([{key:"assets",title:"Assets",focusedIcon:"folder"},{key:"api_configuration",title:"API Configuration",focusedIcon:"cogs"}]),i=l()(c,1)[0],a=y.default.SceneMap({assets:ae,api_configuration:Y});return Object(p.jsx)(y.default,{navigationState:{index:n,routes:i},onIndexChange:r,renderScene:a})},ue=n(156),le=function(){var e=m()((function*(e){try{yield ue.default.setItem("byos/application",JSON.stringify(e))}catch(t){}}));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=m()((function*(){try{var e=yield ue.default.getItem("byos/application");if(null!==e)return e}catch(t){}return""}));return function(){return e.apply(this,arguments)}}(),je=function(e){try{return JSON.parse(e)}catch(t){return{}}},de=function(){var e=m()((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"{}",t=yield fe();return je(t||e)}));return function(){return e.apply(this,arguments)}}();function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var be=function(){var e=i.a.useContext(f),t=l()(e,1)[0],n=function(e){var t=Object(o.useState)(e),n=l()(t,2),r=n[0],c=n[1],i=Object(o.useState)(!1),a=l()(i,2),s=a[0],u=a[1];return Object(o.useMemo)((function(){de(JSON.stringify(e)).then((function(e){c(e),u(!0)}))}),[e]),{data:r,isLoaded:s}}(j),r=n.data,c=n.isLoaded,a=Object(o.useState)(r),u=l()(a,2),b=u[0],y=u[1];return Object(o.useEffect)((function(){y(r)}),[r]),Object(o.useEffect)((function(){var e;c&&(console.log("[App] Application state was updated = ",b),e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},b),le(e))}),[b,c]),Object(p.jsx)(O.default,{children:Object(p.jsxs)(d.Provider,{value:a,children:[t.isReady&&t.routes.map((function(e){return null})),Object(p.jsx)(g,{title:"BYOS"}),Object(p.jsx)(se,{})]})})};var pe=n(7);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(){return Object(p.jsx)(pe.default,ye({},arguments.length<=0?void 0:arguments[0]))},ve=function(){return Object(p.jsx)(F.default,ye({},arguments.length<=0?void 0:arguments[0]))};function me(e){var t=e.children,n=(e.isOpen,e.handleClose);return Object(p.jsxs)(he,{style:{marginTop:100},children:[Object(p.jsx)(ve,{onPress:function(){return n()},children:"Close"}),t]})}var xe={isReady:!1,routes:[{path:"/credentials",component:Object(p.jsx)((function(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(me,{isOpen:!1,handleClose:function(){},children:Object(p.jsx)(Q,{})})})}),{}),showInNavigation:!0},{path:"/",component:Object(p.jsx)((function(){return Object(p.jsx)(p.Fragment,{})}),{}),showInNavigation:!0}]};function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=function(e){var t=e.children,n=i.a.useContext(f),r=l()(n,2),c=r[0],a=r[1];return Object(o.useEffect)((function(){!1===c.isReady&&a(we(we({},c),{},{isReady:!0}))}),[c.isReady,c.routes]),Object(p.jsx)(p.Fragment,{children:t})},Ce=n(359),De=n(224),Ee=new Ce.QueryClient;function ke(e){var t=e.children;return Object(p.jsx)(De.QueryClientProvider,{client:Ee,children:t})}var Ae=function(e){var t=e.children,n=Object(o.useState)(xe);return Object(p.jsx)(ke,{children:Object(p.jsx)(f.Provider,{value:n,children:Object(p.jsx)(Se,{children:t})})})},Re=function(){return Object(p.jsx)(Ae,{children:Object(p.jsx)(be,{})})};c.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}});function Ie(){return Object(p.jsx)(Re,{})}Object(r.default)(Ie),Object(r.default)(Ie)}},[[252,1,2]]]);
//# sourceMappingURL=app.9e7e7489.chunk.js.map